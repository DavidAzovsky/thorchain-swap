(this["webpackJsonpbepswap-multichain-app"]=this["webpackJsonpbepswap-multichain-app"]||[]).push([[5],{1218:function(e,t,n){"use strict";var i=n(4),c=n.n(i),o=n(18),s=n(37),a=n(0),r=n(30),l=n(143);t.a=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],i=t[1];return Object(a.useEffect)((function(){(function(){var e=Object(o.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",i("..."),e.prev=2,e.next=5,l.a.getFees();case 5:n=e.sent,t=r.Amount.fromBaseAmount(n.fastest.amount(),8).toFixed(8),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log("quote fee error",e.t0);case 12:i("".concat(t," BNB"));case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}})()()}),[]),n}},1226:function(e,t,n){"use strict";n.r(t);var i,c=n(4),o=n.n(c),s=n(18),a=n(37),r=n(0),l=n(74),u=n(244),p=n(1214),d=n(19),j=n(85),b=n(30),f=n(182),m=n(125),O=n(208),x=n(1218),g=n(143),h=n(112),v=n(14),w=n(12),y=n(7),C=n(51),A=Object(w.d)(j.Panel).withConfig({displayName:"Swapstyle__Container",componentId:"sc-1vlug34-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;background:",";margin-left:auto;margin-right:auto;padding-top:0px;border-radius:14px;border:1px solid ",";"],Object(y.palette)("background",0),Object(y.palette)("gray",0)),S=w.d.div.withConfig({displayName:"Swapstyle__ContentPanel",componentId:"sc-1vlug34-1"})(["display:flex;flex-direction:column;width:100%;padding:16px 8px 8px 8px;",""],C.a.sm(i||(i=Object(v.a)(["\n    padding: 16px 12px 4px 12px;\n  "])))),I=w.d.div.withConfig({displayName:"Swapstyle__ToolContainer",componentId:"sc-1vlug34-2"})(["display:flex;height:80px;"]),_=w.d.div.withConfig({displayName:"Swapstyle__SliderWrapper",componentId:"sc-1vlug34-3"})(["width:260px;"]),k=w.d.div.withConfig({displayName:"Swapstyle__SwitchPair",componentId:"sc-1vlug34-4"})(["display:flex;justify-content:center;align-items:center;flex:1;svg{width:24px;height:24px;color:",";transform:rotate(90deg);}"],Object(y.palette)("primary",0)),M=(w.d.div.withConfig({displayName:"Swapstyle__PoolSelect",componentId:"sc-1vlug34-5"})(["display:flex;justify-content:space-between;align-items:center;margin:24px 0;"]),w.d.div.withConfig({displayName:"Swapstyle__FormItem",componentId:"sc-1vlug34-6"})(["display:flex;flex-direction:column;margin:16px 0;"])),N=Object(w.d)(j.Label).attrs({weight:"bold"}).withConfig({displayName:"Swapstyle__FormLabel",componentId:"sc-1vlug34-7"})(["margin-bottom:8px;"]),F=w.d.div.withConfig({displayName:"Swapstyle__ConfirmButtonContainer",componentId:"sc-1vlug34-8"})(["display:flex;justify-content:center;align-items:center;width:100%;padding:0 2%;margin-top:14px;button{flex:1;}"]),P=w.d.div.withConfig({displayName:"Swapstyle__ConfirmModalContent",componentId:"sc-1vlug34-9"})(["display:flex;flex-direction:column;padding:10px;"]),B=w.d.div.withConfig({displayName:"Swapstyle__SwapInfo",componentId:"sc-1vlug34-10"})(["display:flex;flex-direction:column;width:100%;padding:8px;margin-top:14px;border:1px solid ",";"],Object(y.palette)("gray",0)),R=w.d.div.withConfig({displayName:"Swapstyle__HeaderContent",componentId:"sc-1vlug34-11"})(["display:flex;flex-direction:row;justify-content:space-between;align-items:center;flex:1;padding:0 20px;"]),T=w.d.div.withConfig({displayName:"Swapstyle__HeaderActions",componentId:"sc-1vlug34-12"})(["display:flex;align-items:center;"]),E=n(1),U=function(e){var t=e.inputAsset,n=e.outputAsset,i=Object(l.f)(),c=Object(O.a)().wallet,v=Object(m.a)(),w=v.pools,y=v.poolLoading,C=Object(f.a)().slippageTolerance,U=Object(r.useMemo)((function(){var e=w.map((function(e){return e.asset}));return e.push(b.Asset.RUNE()),e}),[w]),W=Object(r.useMemo)((function(){return c?Object(b.getWalletAssets)(c).filter((function(e){return U.find((function(t){return t.eq(e)}))})):U.filter((function(e){return e.chain===d.f}))}),[c,U]),L=Object(r.useState)(b.Amount.fromAssetAmount(0,8)),V=Object(a.a)(L,2),H=V[0],q=V[1],J=Object(r.useState)(0),z=Object(a.a)(J,2),D=z[0],G=z[1],K=Object(r.useState)(""),Q=Object(a.a)(K,2),X=Q[0],Y=Q[1],Z=Object(r.useState)(!1),$=Object(a.a)(Z,2),ee=$[0],te=$[1],ne=Object(x.a)(),ie=Object(r.useMemo)((function(){if(y)return null;try{var e=new b.AssetAmount(t,H);return new b.Swap(t,n,w,e,C)}catch(i){console.log(i)}return null}),[t,n,w,H,C,y]),ce=Object(r.useMemo)((function(){return ie?ie.outputAmount.amount:b.Amount.fromAssetAmount(0,8)}),[ie]),oe=Object(r.useMemo)((function(){return ie?ie.slip:new b.Percent(0)}),[ie]),se=Object(r.useMemo)((function(){return ie?"1 ".concat(ie.inputAsset.ticker," = ").concat(ie.price.toFixedInverted(3)," ").concat(ie.outputAsset.ticker):""}),[ie]),ae=Object(r.useMemo)((function(){return ie?ie.minOutputAmount:b.Amount.fromAssetAmount(0,8)}),[ie]),re=Object(r.useMemo)((function(){return new b.Price({baseAsset:t,pools:w,priceAmount:H})}),[t,H,w]),le=Object(r.useMemo)((function(){return new b.Price({baseAsset:n,pools:w,priceAmount:ce})}),[n,ce,w]);Object(r.useEffect)((function(){if(c){var e=Object(b.getWalletAddressByChain)(c,n.chain);Y(e||"")}}),[c,n]);var ue=Object(r.useMemo)((function(){return c?Object(b.getAssetBalance)(t,c).amount:b.Amount.fromAssetAmount(Math.pow(10,3),8)}),[t,c]),pe=Object(r.useCallback)((function(e){var t=e.target.value;Y(t)}),[]),de=Object(r.useCallback)((function(e){i.push(Object(h.o)(e,n))}),[i,n]),je=Object(r.useCallback)((function(e){i.push(Object(h.o)(t,e))}),[i,t]),be=Object(r.useCallback)((function(){i.push(Object(h.o)(n,t))}),[i,t,n]),fe=Object(r.useCallback)((function(e){e.gt(ue)?(q(ue),G(100)):(q(e),G(e.div(ue).mul(100).assetAmount.toNumber()))}),[ue]),me=Object(r.useCallback)((function(e){G(e);var t=ue.mul(e).div(100);q(t)}),[ue]),Oe=Object(r.useCallback)((function(){me(100)}),[me]),xe=Object(r.useCallback)(Object(s.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(te(!1),!c||!ie){e.next=8;break}return e.next=4,g.a.swap(ie,X);case 4:t=e.sent,n=g.a.bnb.getClient().getExplorerTxUrl(t),Object(j.Notification)({type:"open",message:"View Swap Tx.",description:"Transaction sent successfully!",btn:Object(E.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer",children:"View Transaction"}),duration:20}),console.log("txhash",t);case 8:case"end":return e.stop()}}),e)}))),[c,ie,X]),ge=Object(r.useCallback)((function(){te(!1)}),[]),he=Object(r.useCallback)((function(){if(c&&ie){if(ie.hasInSufficientFee)return void Object(j.Notification)({type:"error",message:"Swap Insufficient Fee",description:"Input amount is not enough to cover the fee"});te(!0)}else Object(j.Notification)({type:"error",message:"Wallet Not Found",description:"Please connect wallet"})}),[c,ie]),ve=Object(r.useMemo)((function(){var e;return null!==(e=null===ie||void 0===ie?void 0:ie.isValid())&&void 0!==e&&e}),[ie]),we=Object(r.useMemo)((function(){var e;return null!==(e=null===ie||void 0===ie?void 0:ie.isSlipValid())&&void 0!==e&&e}),[ie]),ye=Object(r.useMemo)((function(){return Object(E.jsxs)(P,{children:[Object(E.jsx)(j.Information,{title:"Send",description:"".concat(H.toFixed()," ").concat(t.ticker.toUpperCase())}),Object(E.jsx)(j.Information,{title:"Receive",description:"".concat(ce.toFixed()," ").concat(n.ticker.toUpperCase())}),Object(E.jsx)(j.Information,{title:"Slip",description:oe.toFixed(2),error:we}),Object(E.jsx)(j.Information,{title:"Minimum Received",description:ae.toFixed(2)}),!!X&&Object(E.jsx)(j.Information,{title:"Recipient",description:X})]})}),[H,ce,t,n,X,oe,we,ae]),Ce=Object(r.useMemo)((function(){return"Swap ".concat(t.ticker," >> ").concat(n.ticker)}),[t,n]),Ae=Object(r.useMemo)((function(){return t.isRUNE()?n:t}),[t,n]);return Object(E.jsxs)(A,{children:[Object(E.jsx)(j.Helmet,{title:Ce,content:Ce}),Object(E.jsx)(j.ContentTitle,{children:Object(E.jsxs)(R,{children:[Object(E.jsx)("div",{children:Ce}),Object(E.jsxs)(T,{children:[Object(E.jsx)(u.a,{to:Object(h.m)(Ae),children:Object(E.jsx)(j.Button,{typevalue:"outline",fixedWidth:!1,round:!0,children:"Pool"})}),Object(E.jsx)(j.SettingsOverlay,{})]})]})}),Object(E.jsxs)(S,{children:[Object(E.jsx)(j.AssetInputCard,{title:"send",asset:t,assets:W,amount:H,balance:ue,onChange:fe,onSelect:de,onMax:Oe,usdPrice:re}),Object(E.jsxs)(I,{children:[Object(E.jsx)(_,{children:Object(E.jsx)(j.Slider,{value:D,onChange:me,withLabel:!0})}),Object(E.jsx)(k,{children:Object(E.jsx)(j.IconButton,{onClick:be,children:Object(E.jsx)(p.a,{})})})]}),Object(E.jsx)(j.AssetInputCard,{title:"receive",asset:n,assets:U,amount:ce,onSelect:je,inputProps:{disabled:!0},usdPrice:le}),Object(E.jsxs)(M,{children:[Object(E.jsx)(N,{children:"Recipient"}),Object(E.jsx)(j.Input,{typevalue:"ghost",sizevalue:"big",value:X,onChange:pe,placeholder:"Recipient"})]}),Object(E.jsxs)(B,{children:[Object(E.jsx)(j.Information,{title:"Rate",description:se}),Object(E.jsx)(j.Information,{title:"Slip",description:oe.toFixed(2),error:!we}),Object(E.jsx)(j.Information,{title:"Minimum Received",description:ae.toFixed(2)}),Object(E.jsx)(j.Information,{title:"Fee",description:ne})]}),Object(E.jsx)(F,{children:Object(E.jsx)(j.FancyButton,{onClick:he,error:!ve,children:"Swap"})})]}),Object(E.jsx)(j.ConfirmModal,{visible:ee,onOk:xe,onCancel:ge,children:ye})]})},W=function(){var e=function(e){var t,n;if(!e||2!==e.split("_").length)return null;var i=null===(t=e.split("_"))||void 0===t?void 0:t[0],c=null===(n=e.split("_"))||void 0===n?void 0:n[1];if(!i||!c)return null;var o=b.Asset.fromAssetString(i),s=b.Asset.fromAssetString(c);return o&&s?{inputAsset:o,outputAsset:s}:null}(Object(l.h)().pair);if(e){var t=e.inputAsset,n=e.outputAsset;return Object(E.jsx)(U,{inputAsset:t,outputAsset:n})}return null};t.default=W}}]);
//# sourceMappingURL=5.40be1ab3.chunk.js.map